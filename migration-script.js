const _0x51277e=_0x3017;function _0x3b3d(){const _0x28e583=['\x20\x20\x20-\x20checkMigrationStatus()\x20ƒë·ªÉ\x20ki·ªÉm\x20tra\x20tr·∫°ng\x20th√°i','üìÑ\x20S·ªë\x20l∆∞·ª£ng\x20task_content:\x20','runSimpleMigration','78649VdUdoE','\x20k√Ω\x20t·ª±)','\x20tasks?\x0a\x0a','‚ùå\x20L·ªói:\x20','‚ùå\x20L·ªói\x20khi\x20c·∫≠p\x20nh·∫≠t\x20submission_link\x20cho\x20task\x20','ƒêi·ªÅu\x20n√†y\x20s·∫Ω:\x0a','486618oOEFsd','review','confirm','name','limit','\x0aüéØ\x20Migration\x20ho√†n\x20t·∫•t!\x20B√¢y\x20gi·ªù\x20b·∫°n\x20c√≥\x20th·ªÉ\x20l∆∞u\x20n·ªôi\x20dung\x20review\x20m√†\x20kh√¥ng\x20b·ªã\x20l·ªói\x20k√≠ch\x20th∆∞·ªõc.','12WPxXyd','2194866gDTYgV','-\x20Kh√¥ng\x20th·ªÉ\x20ho√†n\x20t√°c\x20sau\x20khi\x20ch·∫°y','select','üìã\x20T√¨m\x20th·∫•y\x20','692505iTxLSd','301805iZCJIw','-\x20Chuy·ªÉn\x20n·ªôi\x20dung\x20t·ª´\x20submission_link\x20sang\x20task_content\x0a','submission_link','tasks','B·∫°n\x20c√≥\x20ch·∫Øc\x20ch·∫Øn\x20mu·ªën\x20migration\x20','‚úÖ\x20Migration\x20th√†nh\x20c√¥ng\x20task\x20','[CONTENT_SAVED]','üîç\x20Ki·ªÉm\x20tra\x20tr·∫°ng\x20th√°i\x20migration...','exact','üè∑Ô∏è\x20S·ªë\x20l∆∞·ª£ng\x20tasks\x20c√≥\x20marker\x20[CONTENT_SAVED]:\x20','üìä\x20T·ªïng\x20c·ªông:\x20','log','‚ùå\x20B·∫£ng\x20task_content\x20ch∆∞a\x20ƒë∆∞·ª£c\x20t·∫°o.\x20Vui\x20l√≤ng\x20ch·∫°y\x20fix-content-size.sql\x20tr∆∞·ªõc.','length','error','forEach','\x20tasks','id,\x20name,\x20submission_link','4UMbuuU','-\x20C·∫≠p\x20nh·∫≠t\x20submission_link\x20th√†nh\x20[CONTENT_SAVED]\x0a','üìä\x20===\x20TR·∫†NG\x20TH√ÅI\x20MIGRATION\x20===','update','‚úÖ\x20Kh√¥ng\x20c√≥\x20task\x20n√†o\x20c·∫ßn\x20migration','task_content','‚ùå\x20L·ªói\x20khi\x20l·∫•y\x20danh\x20s√°ch\x20tasks:','üöÄ\x20Migration\x20script\x20ƒë√£\x20ƒë∆∞·ª£c\x20load.','not','‚úÖ\x20B·∫£ng\x20task_content\x20ƒë√£\x20t·ªìn\x20t·∫°i','\x20\x20\x20-\x20runSimpleMigration()\x20ƒë·ªÉ\x20ch·∫°y\x20migration','checkMigrationStatus','‚úÖ\x20Th√†nh\x20c√¥ng:\x20','1441580vfROcz','from','üìù\x20Danh\x20s√°ch\x20tasks\x20s·∫Ω\x20ƒë∆∞·ª£c\x20migration:','‚ùå\x20Migration\x20ƒë√£\x20b·ªã\x20h·ªßy','üöÄ\x20B·∫Øt\x20ƒë·∫ßu\x20migration...','1818712OYefGq'];_0x3b3d=function(){return _0x28e583;};return _0x3b3d();}(function(_0x17eb1c,_0x2d474b){const _0x566d25=_0x3017,_0x258f82=_0x17eb1c();while(!![]){try{const _0x59cae8=-parseInt(_0x566d25(0x164))/0x1*(parseInt(_0x566d25(0x14e))/0x2)+parseInt(_0x566d25(0x175))/0x3+parseInt(_0x566d25(0x170))/0x4*(parseInt(_0x566d25(0x176))/0x5)+parseInt(_0x566d25(0x16a))/0x6+-parseInt(_0x566d25(0x15b))/0x7+-parseInt(_0x566d25(0x160))/0x8+parseInt(_0x566d25(0x171))/0x9;if(_0x59cae8===_0x2d474b)break;else _0x258f82['push'](_0x258f82['shift']());}catch(_0x40233c){_0x258f82['push'](_0x258f82['shift']());}}}(_0x3b3d,0x23b8e));async function runSimpleMigration(){const _0x15c831=_0x3017;console[_0x15c831(0x181)](_0x15c831(0x15f));try{const {data:_0x4c783e,error:_0x457fcc}=await supabase['from'](_0x15c831(0x153))[_0x15c831(0x173)]('id')[_0x15c831(0x16e)](0x1);if(_0x457fcc){console[_0x15c831(0x14a)](_0x15c831(0x148));return;}console[_0x15c831(0x181)](_0x15c831(0x157));const {data:_0x5de555,error:_0x2781e9}=await supabase['from'](_0x15c831(0x179))[_0x15c831(0x173)](_0x15c831(0x14d))[_0x15c831(0x156)](_0x15c831(0x178),'is',null)['neq']('submission_link','')['neq'](_0x15c831(0x178),_0x15c831(0x17c))[_0x15c831(0x156)]('submission_link','like','http%');if(_0x2781e9){console[_0x15c831(0x14a)](_0x15c831(0x154),_0x2781e9);return;}console[_0x15c831(0x181)](_0x15c831(0x174)+_0x5de555[_0x15c831(0x149)]+'\x20tasks\x20c·∫ßn\x20migration');if(_0x5de555[_0x15c831(0x149)]===0x0){console[_0x15c831(0x181)](_0x15c831(0x152));return;}console['log'](_0x15c831(0x15d)),_0x5de555[_0x15c831(0x14b)](_0x28174c=>{const _0xae4ed0=_0x15c831;console[_0xae4ed0(0x181)]('\x20\x20\x20-\x20Task\x20'+_0x28174c['id']+':\x20'+_0x28174c[_0xae4ed0(0x16d)]+'\x20('+_0x28174c['submission_link']['length']+_0xae4ed0(0x165));});const _0x1a649f=window[_0x15c831(0x16c)](_0x15c831(0x17a)+_0x5de555[_0x15c831(0x149)]+_0x15c831(0x166)+_0x15c831(0x169)+_0x15c831(0x177)+_0x15c831(0x14f)+_0x15c831(0x172));if(!_0x1a649f){console[_0x15c831(0x181)](_0x15c831(0x15e));return;}let _0x515942=0x0,_0x157198=0x0;for(const _0x534678 of _0x5de555){try{if(_0x534678['submission_link']['length']<=0x64){console['log']('‚è≠Ô∏è\x20B·ªè\x20qua\x20task\x20'+_0x534678['id']+'\x20(n·ªôi\x20dung\x20ng·∫Øn:\x20'+_0x534678[_0x15c831(0x178)]['length']+'\x20k√Ω\x20t·ª±)');continue;}const {error:_0x15c733}=await supabase[_0x15c831(0x15c)](_0x15c831(0x153))['upsert']({'task_id':parseInt(_0x534678['id']),'content_type':_0x15c831(0x16b),'content':_0x534678[_0x15c831(0x178)]});if(_0x15c733){console['error']('‚ùå\x20L·ªói\x20khi\x20insert\x20task_content\x20cho\x20task\x20'+_0x534678['id']+':',_0x15c733),_0x157198++;continue;}const {error:_0x4fc90f}=await supabase[_0x15c831(0x15c)]('tasks')[_0x15c831(0x151)]({'submission_link':_0x15c831(0x17c)})['eq']('id',_0x534678['id']);if(_0x4fc90f){console[_0x15c831(0x14a)](_0x15c831(0x168)+_0x534678['id']+':',_0x4fc90f),_0x157198++;continue;}console[_0x15c831(0x181)](_0x15c831(0x17b)+_0x534678['id']+':\x20'+_0x534678[_0x15c831(0x16d)]),_0x515942++,await new Promise(_0xe5c797=>setTimeout(_0xe5c797,0x64));}catch(_0x20cecc){console['error']('‚ùå\x20L·ªói\x20khi\x20migration\x20task\x20'+_0x534678['id']+':',_0x20cecc),_0x157198++;}}console[_0x15c831(0x181)]('\x0aüéâ\x20===\x20K·∫æT\x20QU·∫¢\x20MIGRATION\x20==='),console[_0x15c831(0x181)](_0x15c831(0x15a)+_0x515942+_0x15c831(0x14c)),console[_0x15c831(0x181)](_0x15c831(0x167)+_0x157198+_0x15c831(0x14c)),console[_0x15c831(0x181)](_0x15c831(0x180)+_0x5de555[_0x15c831(0x149)]+_0x15c831(0x14c)),_0x515942>0x0&&console[_0x15c831(0x181)](_0x15c831(0x16f));}catch(_0x280cf9){console[_0x15c831(0x14a)]('‚ùå\x20L·ªói\x20trong\x20qu√°\x20tr√¨nh\x20migration:',_0x280cf9);}}function _0x3017(_0x48afae,_0x1af7bf){const _0x3b3d6c=_0x3b3d();return _0x3017=function(_0x301755,_0x1f476e){_0x301755=_0x301755-0x148;let _0x2bdf4a=_0x3b3d6c[_0x301755];return _0x2bdf4a;},_0x3017(_0x48afae,_0x1af7bf);}async function checkMigrationStatus(){const _0x5e3bd9=_0x3017;console[_0x5e3bd9(0x181)](_0x5e3bd9(0x17d));try{const {count:_0x4f55ff}=await supabase[_0x5e3bd9(0x15c)](_0x5e3bd9(0x153))[_0x5e3bd9(0x173)]('*',{'count':_0x5e3bd9(0x17e),'head':!![]}),{count:_0x78d776}=await supabase['from']('tasks')['select']('*',{'count':_0x5e3bd9(0x17e),'head':!![]})['eq'](_0x5e3bd9(0x178),_0x5e3bd9(0x17c));console['log'](_0x5e3bd9(0x150)),console['log'](_0x5e3bd9(0x162)+_0x4f55ff),console['log'](_0x5e3bd9(0x17f)+_0x78d776),_0x4f55ff===_0x78d776?console['log']('‚úÖ\x20Migration\x20ho√†n\x20t·∫•t\x20v√†\x20ƒë·ªìng\x20b·ªô'):console[_0x5e3bd9(0x181)]('‚ö†Ô∏è\x20Migration\x20ch∆∞a\x20ƒë·ªìng\x20b·ªô\x20ho√†n\x20to√†n');}catch(_0x122757){console[_0x5e3bd9(0x14a)]('‚ùå\x20L·ªói\x20khi\x20ki·ªÉm\x20tra\x20tr·∫°ng\x20th√°i:',_0x122757);}}window[_0x51277e(0x163)]=runSimpleMigration,window[_0x51277e(0x159)]=checkMigrationStatus,console[_0x51277e(0x181)](_0x51277e(0x155)),console[_0x51277e(0x181)]('üìù\x20S·ª≠\x20d·ª•ng:'),console[_0x51277e(0x181)](_0x51277e(0x158)),console['log'](_0x51277e(0x161));