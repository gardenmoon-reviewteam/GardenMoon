<!doctypehtml><html lang=vi><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>Chỉnh sửa Beta - Garden Moon</title><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css rel=stylesheet><link href=styles.css rel=stylesheet><style>.beta-input-container{max-width:1000px;margin:0 auto;padding:20px}.task-info-card{background:linear-gradient(135deg,#667eea 0,#764ba2 100%);color:#fff;border-radius:15px;padding:20px;margin-bottom:30px}.content-editor{border:2px solid #e9ecef;border-radius:10px;min-height:400px;padding:20px;font-family:'Courier New',monospace;font-size:14px;line-height:1.6;resize:vertical}.content-editor:focus{border-color:#007bff;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.word-count{background:#f8f9fa;border-radius:5px;padding:10px;margin-top:10px;font-size:12px;color:#6c757d}.save-btn{background:linear-gradient(135deg,#28a745,#20c997);border:none;border-radius:25px;padding:12px 30px;font-weight:600;transition:all .3s ease}.save-btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(40,167,69,.4)}.back-btn{background:linear-gradient(135deg,#6c757d,#495057);border:none;border-radius:25px;padding:12px 30px;font-weight:600;transition:all .3s ease}.back-btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(108,117,125,.4)}.status-badge{font-size:12px;padding:5px 10px;border-radius:15px}.loading-spinner{display:none}.loading-spinner.show{display:inline-block}.text-toolbar{background:#f8f9fa;border:1px solid #dee2e6;border-radius:8px;padding:15px;margin-bottom:15px}.text-toolbar .form-group{margin-bottom:10px}.text-toolbar label{font-weight:600;font-size:12px;color:#495057;margin-bottom:5px}.text-toolbar input,.text-toolbar select{font-size:12px}.toolbar-row{display:flex;gap:15px;align-items:end;flex-wrap:wrap}.toolbar-item{flex:1;min-width:120px}.action-buttons{display:flex;gap:10px;flex-wrap:wrap}.action-btn{padding:6px 12px;font-size:12px;border-radius:5px}.readonly-mode{background-color:#f8f9fa;opacity:.8}.readonly-mode .content-editor{pointer-events:none}.readonly-mode .text-toolbar{opacity:.6;pointer-events:none}</style><nav class="bg-primary navbar navbar-dark navbar-expand-lg"><div class=container><a class=navbar-brand href=index.html><i class="fas me-2 fa-arrow-left"></i> Quay lại Bảng DL</a><div class="ms-auto navbar-nav"><span id=currentUserInfo class=navbar-text><i class="fas me-1 fa-user"></i> <span id=currentUserName>Đang tải...</span></span></div></div></nav><div class=beta-input-container><div class=task-info-card id=taskInfoCard><div class=row><div class=col-md-8><h4 id=taskName>Đang tải thông tin...</h4><p class=mb-2 id=taskDescription>Mô tả: <span id=taskDescText>-</span><div class=row><div class=col-md-4><small><i class="fas me-1 fa-calendar"></i> Deadline: <span id=taskDeadline>-</span></small></div><div class=col-md-4><small><i class="fas me-1 fa-user"></i> Người thực hiện: <span id=taskAssignee>-</span></small></div><div class=col-md-4><small><i class="fas me-1 fa-info-circle"></i> Trạng thái: <span id=taskStatus>-</span></small></div></div></div><div class="col-md-4 text-end"><span id=taskStatusBadge class="bg-light status-badge text-dark">-</span></div></div></div><div class=card><div class=card-header><h5 class=mb-0><i class="fas me-2 fa-paint-brush"></i> Công cụ chỉnh sửa văn bản</h5></div><div class=card-body><div class=text-toolbar id=textToolbar><div class=toolbar-row><div class=toolbar-item><label for=fontFamily>Font chữ:</label> <select class="form-control form-control-sm"id=fontFamily><option value="Arial, sans-serif">Arial<option value="Times New Roman, serif">Times New Roman<option value="Courier New, monospace"selected>Courier New<option value="Georgia, serif">Georgia<option value="Verdana, sans-serif">Verdana<option value="Tahoma, sans-serif">Tahoma<option value="Trebuchet MS, sans-serif">Trebuchet MS<option value="Impact, sans-serif">Impact</select></div><div class=toolbar-item><label for=fontSize>Cỡ chữ:</label> <select class="form-control form-control-sm"id=fontSize><option value=12>12px<option value=14 selected>14px<option value=16>16px<option value=18>18px<option value=20>20px<option value=24>24px<option value=28>28px<option value=32>32px</select></div><div class=toolbar-item><label for=lineHeight>Khoảng cách dòng:</label> <select class="form-control form-control-sm"id=lineHeight><option value=1.2>1.2<option value=1.4>1.4<option value=1.6 selected>1.6<option value=1.8>1.8<option value=2.0>2.0</select></div></div><div class=toolbar-row><div class=toolbar-item><label>Chức năng:</label><div class=action-buttons><button class="btn action-btn btn-outline-primary"onclick=splitByPeriods()><i class="fas me-1 fa-cut"></i>Tách dòng</button> <button class="btn action-btn btn-outline-info"onclick=formatText()><i class="fas me-1 fa-magic"></i>Định dạng</button> <button class="btn action-btn btn-outline-secondary"onclick=clearFormatting()><i class="fas me-1 fa-eraser"></i>Gộp dòng</button></div></div></div></div></div></div><div class=card><div class="card-header align-items-center d-flex justify-content-between"><h5 class=mb-0><i class="fas me-2 fa-edit"></i> Nội dung Beta</h5><div id=editModeIndicator><span id=modeBadge class="badge bg-info">Chế độ nhập</span></div></div><div class=card-body><textarea class="form-control content-editor"id=betaContent placeholder="Nhập nội dung beta tại đây..."rows=20></textarea><div class=word-count><i class="fas me-1 fa-text-width"></i> Số ký tự: <span id=charCount>0</span> | Số từ: <span id=wordCount>0</span> | Số dòng: <span id=lineCount>0</span></div></div></div><div class="d-flex justify-content-between mt-4"><button class="btn back-btn"onclick=goBack()><i class="fas me-2 fa-arrow-left"></i> Quay lại</button><div><button class="me-2 btn btn-outline-secondary"onclick=clearContent()><i class="fas me-2 fa-eraser"></i> Xóa nội dung</button> <button class="btn save-btn"onclick=saveBetaContent() id=saveButton><i class="fas me-2 fa-save"></i> <span id=saveBtnText>Lưu nội dung</span> <span id=saveSpinner class=loading-spinner><i class="fas fa-spin fa-spinner"></i></span></button></div></div></div><div class="bottom-0 end-0 p-3 position-fixed toast-container"><div class=toast id=notificationToast role=alert><div class=toast-header><strong class=me-auto id=toastTitle>Thông báo</strong> <button class=btn-close data-bs-dismiss=toast type=button></button></div><div class=toast-body id=toastMessage></div></div></div><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js></script><script src=https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2></script><script>